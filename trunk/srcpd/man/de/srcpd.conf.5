.TH srcpd.conf 5 "29. Dezember 2007"
.\"
.\"
.SH "NAME"
srcpd.conf \- Die Konfigurationsdatei für den srcpd Deamon
.\"
.\"
.SH "BESCHREIBUNG"
Die Datei \fIsrcpd.conf\fP wird vom SRCP-Daemon \fBsrcpd\fP als
systemweite Konfigurationsdatei genutzt. Sie bescheibt die
für die Laufzeit des Systemsdienstes entscheidenden Einstellungen zum
Verhalten des Daemons selbst, sowie die Anzahl, Art und Betriebsweise
der angeschlossenen Schnittstellen zur Modellbahn. Weitere Details zum
Betrieb beschreibt das Handbuch \fBsrcpd (8)\fP des Daemons.
.\"
.\"
.SH "STANDARD KONFIGURATIONSDATEI"
.\"
.PP
Die dem \fBsrcpd\fP mitgelieferte Standardkonfigurationsdatei enthält
beispielhafte Einstellungen sowohl für den Server als auch für einen
vorkonfigurierten Bus. Sie hat den folgenden Aufbau:
.PP
.RS
.nf
<?xml version="1.0"?>
<srcpd version="2.0">
  <bus>
    <server>
      <tcp-port>4303</tcp-port>
      <pid-file>/var/run/srcpd.pid</pid-file>
      <username>nobody</username>
      <groupname>nogroup</groupname>
    </server>
    <verbosity>5</verbosity>
  </bus>
  <bus>
    <loopback>
      <number_fb>3</number_fb>
    </loopback>
    <use_watchdog>no</use_watchdog>
    <verbosity>5</verbosity>
    <auto_power_on>yes</auto_power_on>
  </bus>
</srcpd>
.fi
.RE
.\"
.\"
.SH "DATEIFORMAT"
.\"
.PP
Die Konfigurationsdatei wird im XML-Format abgespeichert. Da es sich bei
XML-Dateien um ein reines Textformat handelt, kann ein erfahrener
Benutzer solche Dateien mit einem beliebigen Texteditor bearbeiten.
Weniger erfahrenen Benutzern sei empfohlen, Veränderungen in der Datei
mit einem speziellen Programm vorzunehmen, damit der Inhalt der Datei
stets korrektes XML enthält.
.PP
Treten beim Lesen der Konfigurationsdatei Fehler auf, sendet \fBsrcpd\fP
entsprechende Fehlermeldungen an den syslog-Daemon. Diese können über
die Datei \fI/var/log/messages\fP verfolgt werden.
.\"
.PP
Aktuell gibt es keine Dokumententypspezifikation (DTD), mit der der
Inhalt der Konfigurationsdatei auf seine Gültigkeit hin überprüft werden
kann.
.\"
.PP
Jede Konfigurationsdatei muß die folgende Grundstruktur enthalten:
.\"
.PP
.nf
    <?xml version="1.0"?>
    <srcpd>
    ...
    </srcpd>
.fi

.PP
Innerhalb dieser Struktur (...) werden die verwendeten Busse angelegt,
für die es jeweils wieder eine eigene Grundstruktur gibt:
.PP
.nf
    <bus>
    ...
    </bus>
    <bus>
    ...
    </bus>
.fi
.\"
.\"
.SS Allgemeine Hinweise
.PP
Der erste konfigurierte Bus muss der für den Server selbst sein. Die
Reihenfolge und die Anzahl der weiteren Busse sind beliebig. Es sollten
nur Busse konfiguriert werden, die auch tatsächlich beim Betrieb des
Daemons Verwendung finden. Nicht benötigte Busse können beispielsweise
über Kommentarzeichen ausgeklammert werden:
.PP
.nf
    <!--
    <bus>
    ...
    </bus>
    -->
.fi

.PP
Hierbei ist zu beachten, das die Nummern der nachfolgenden Busse
sich entsprechend verschieben.
.\"
.\"
.SS Allgemeingültige Optionen
.PP
Die folgenden Konfigurationsoptionen lassen sich für alle Busse
jeweils individuell festlegen.
.\"
.TP
verbosity
Abhängig von diesem Zahlenwert (0..7) erzeugt \fBsrcpd\fP während des
Betriebs mehr oder weniger ausführliche Protokollmeldungen zum aktuellen
Geschehen. Mit dem Wert 0 erfolgt nur eine minimale Ausgabe, mit höheren
Werten steigt auch die Ausführlichkeit dieser Meldetätigkeit. Für die
Fehlersuche sollte der Wert möglichst hoch, bei störungsfreiem Betrieb
möglichst niedrig gewählt werden. Die Meldungen lassen sich über die
Log-Datei des Syslog-Daemons \fI/var/log/messages\fP verfolgen; nähere
Informationen hierzu befinden sich im Handbuch \fBsrcpd (8)\fP.
.\"
.TP
use_watchdog
Einige Busse bieten die Möglichkeit, die Aktivität des Busses zu
überwachen und einen blockierten Bus wieder zu aktivieren.  Gültige
Werte sind »yes« oder »no«. Der voreingestellte Wert ist »no«..\"
.\"
.TP
restore_device_settings
Einige Busse bieten die Möglichkeit, die Einstellungen der seriellen
Schnittstelle wieder auf den Ausgangswert zurück zu stellen. Gültige
Werte sind »yes« oder »no«. Der voreingestellte Wert ist »no«.
.\"
.TP
device
Hiermit wird der Name der angesteuerten Schnittstelle (z.B. /dev/ttyS0)
festgelegt. Die Busse \fBserver\fP und \fBloopback\fP benötigen diesen
Eintrag nicht. Der voreingestellte Wert ist »/dev/null«.
.\"
.TP
speed
Bei Bussen, die eine serielle Schnittstelle nutzen, ist es möglich, die
Schnittstellengeschwindigkeit zu wählen, soweit diese nicht fest
eingestellt ist. Mögliche Zahlenwerte sind folgende: 2400, 4800, 9600,
19200, 38400, 57600 and 115200\ Baud. Voreingestellt ist 2400\ Baud.
.\"
.TP
auto_power_on
Hiermit wird festgelegt, ob beim Start des Daemons automatisch der
Digitalstrom des Busses eingeschaltet wird. Gültige Werte sind »yes«
oder »no«. Die Busse \fBserver\fP und \fBloopback\fP benötigen diesen
Eintrag nicht. Der voreingestellte Wert ist »no«.
.\"
.\"
.SS server
.\"
.PP
Dieser Bus darf in keiner Konfigurationsdatei fehlen. Er verfügt über
die folgenden Einstellmöglichkeiten:
.\"
.TP
tcp-port
Mit diesem Wert wird die Netzwerkportnummer für die TCP/IP-Kommunikation
zwischen \fBsrcpd\fP und den SRCP-Clients festgelegt. Die Voreinstellung
hierfür ist der von der IANA festgelegte Wert \fB4303\fP.
.\"
.TP
pid-file
Name der Datei, in der \fBsrcpd\fP die Prozess-ID abspeichert. Der
voreingestellte Wert hierfür ist \fI/var/run/srcpd.pid\fP.
.\"
.TP
username
Benutzerkennung, unter der \fBsrcpd\fP auf dem System läuft.
Voreingestellt ist \fBnobody\fP.
.\"
.TP
groupname
Gruppenkennung unter der \fBsrcpd\fP auf dem System läuft. Voreingestellt
ist \fBnogroup\fP.
.\"
.\"
.SS ddl
.PP
Digital Direct für Linux über die serielle Schnittstelle (RS232).
.TP
number_ga
.TP
number_gl
.TP
enable_ringindicator_checking
.TP
enable_checkshort_checking
.TP
inverse_dsr_handling
.TP
enable_maerklin
.TP
enable_nmradcc
.TP
improve_nmradcc_timing
.TP
shortcut_failure_delay
.TP
nmradcc_translation_routine
.TP
enable_usleep_patch
.TP
usleep_usec
.\"
.\"
.SS ddl-s88
.PP
Digital Direct für Linux S88 über die parallele Schnittstelle (IEEE 1284).
.TP
ioport
Eingabe/Ausgabe-Adresse des Druckeranschlusses. Der voreingestellte Wert
ist 0x0378.
.TP
clockscale
.TP
refresh
.TP
fb_delay_time_0
.TP
number_fb_1
.TP
number_fb_2
.TP
number_fb_3
.TP
number_fb_4
.\"
.\"
.SS hsi-88
.\"
.PP
Dieses Modul unterstützt den Betrieb eines Littfinski HSI-88, das an
eine serielle Schnittstelle angeschlossen ist. Auch der Anschluß über
einen USB/Seriell-Konvertierer sollte problemlos möglich sein. Die
Geschwindigkeitseinstellung für die serielle Schnittstelle ist fest auf
9600\ Baud eingestellt und kann nicht verändert werden.

Das HSI-88 verfügt über drei Kanäle zum Anschluß von
S88-Rückmeldemodulen. Die Summe der pro Kanal angeschlossenen Module
(mit 16 Kontakten) darf maximal 31 betragen, sonst erfolgt die Ausgabe
einer Fehlermeldung. Bei der Verwendung von Modulen mit 8 Kontakten
zählen 2 Module wie eines mit 16 Kontakten.
.\"
.TP
number_fb_left
Diese Angabe legt die Anzahl der am Kanal mit der Bezeichnung
\fBlinks\fP angeschlossenen Rückmeldemodule fest.
.\"
.TP
number_fb_center
Diese Angabe legt die Anzahl der am Kanal mit der Bezeichnung
\fBmitte\fP angeschlossenen Rückmeldemodule fest.
.\"
.TP
number_fb_right
Diese Angabe legt die Anzahl der am Kanal mit der Bezeichnung
\fBrechts\fP angeschlossenen Rückmeldemodule fest.
.\"
.TP
fb_delay_time_0
Dieser Wert in Millisekunden legt fest, wie lange ein Rückmeldekontakt
auf Null liegen muß, bevor er als gültiger Wert weitergeleitet wird.
Hiermit lassen sich schlechte Rückmeldungen (Wackler) in begrenztem
Umfang entprellen. Der voreingestellte Wert beträgt 0\ ms.
.\"
.TP
refresh
Wartezeit in Mikrosekungen nach der die Rückmeldungen des Geräts erneut
eingelesen werden. Der voreingestellte Wert beträgt 10000\ µs.
.\"
.\"
.SS i2c-dev
.PP
Bustreiber für das i2c-dev-Interface des Linux Kernels. Er kann
beispielsweise mit der unter http://www.matronix.de/ zu findenden
Hardware genutzt werden.
.TP
multiplex_buses
.TP
ga_hardware_inverters
.TP
ga_reset_device
.\"
.\"
.SS intellibox
.\"
.PP
Dieses Modul unterstüzt den Betrieb mit einer Uhlenbrock Intellibox (IB),
die über eine serielle Schnittstelle angeschlossen ist. Die Ansteuerung
der IB erfolgt über das P50X-Protokoll, zum geringeren Teil mit der
analogen und zum größeren Teil mit der binären Variante. Beim Betrieb mit
protokollkompatiblen Zentralen anderer Hersteller ist das gegebenenfalls
zu berücksichtigen. Das Programmieren von Decodern ist zur Zeit nur
für DCC implementiert. Als Schnittstellengeschwindigkeit sind die
folgenden Varianten möglich: 2400\ Baud, 4800\ Baud, 9600\ Baud,
19200\ Baud und 38400\ Baud.
.\"
.TP
fb_delay_time_0
Dieser Wert in Millisekunden legt fest, wie lange ein Rückmeldekontakt
auf Null liegen muß, bevor er als gültiger Wert weitergeleitet wird.
Hiermit lassen sich schlechte Rückmeldungen (Wackler) in begrenztem
Umfang entprellen. Der voreingestellte Wert beträgt 0\ ms.
.\"
.TP
pause_between_commands
Mit diesem Wert wird die Verzögerungszeit in Millisekungen eingestellt,
nach der ein weiterer Befehl an die angeschlossene Zentrale gesendet
wird. Der optimale Wert muß händisch ermittelt werden. Wenn die Zentrale
nicht reagiert, oder Befehlte ignoriert, sollte der Wert erhöht werden.
Der voreingestellte Wert beträgt 250\ ms.
.\"
.TP
number_ga
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Magnetartikel (GA) fest. Gültig sind Werte von 0 bis 1024. Ein Wert von 0
bedeutet, dass keine Magnetartikel verwendet werden. Der voreingestellte
Wert beträgt 256.
.\"
.TP
number_gl
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Lokdecoder (GL) fest. Gültig sind Werte von 0 bis 10239. Ein Wert von 0 
bedeutet, dass keine Lokdecoder verwendet werden. Der voreingestellte 
Wert beträgt 80.
.\"
.TP
number_fb
Dieser Wert legt die Anzahl der an der IB angeschlossenen
S88-Rückmeldemodule fest. Gültig sind Werte von 0 bis 31 (bei Modulen
mit 16 Kontakten). Der voreingestellte Wert beträgt 0 (keine Module sind
angeschlossen). Über Loconet angeschlossene Module werden gegenwärtig
nicht unterstützt.
.\"
.\"
.SS li100, li100usb
.\"
.PP
Dieses Modul unterstützt den Betrieb mit den Lenz-Geräten LI100, LI100F,
LI101F und LI-USB, angeschlossen über die serielle Schnittstelle (RS232)
bzw. den Universal Serial Bus (USB). Ein USB/Seriell-Konvertierer sollte
nicht verwendet werden. Die möglichen Geschwindigkeiten der seriellen
Schnittstelle sind vom verwendeten Gerät abhängig. Für das LI-USB ist
sie fest auf 57600\ Baud eingestellt, ohne Möglichkeit, das zu verändern.
Ein automatisches Erkennen der richtigen Geschwindikeit ist derzeit in
Arbeit. Wenn die Verbindungsaufnahme scheitert, versuchen Sie mit einer
anderen Geschwindigkeitseinstellung zurecht zu kommen. Erlaubte Werte
sind, abhängig vom verwendeten Gerät, 9600\ Baud, 19200\ Baud, 38400\ Baud,
57600\ Baud und 115200\ Baud.
.\"
.TP
fb_delay_time_0
Dieser Wert in Millisekunden legt fest, wie lange ein Rückmeldekontakt
auf Null liegen muß, bevor er als gültiger Wert weitergeleitet wird.
Hiermit lassen sich schlechte Rückmeldungen (Wackler) in begrenztem
Umfang entprellen. Der voreingestellte Wert beträgt 0\ ms.
.\"
.TP
number_ga
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Magnetartikel (GA) fest. Gültig sind Werte von 0 bis 1024. Ein Wert von 0
bedeutet, dass keine Magnetartikel verwendet werden. Der voreingestellte
Wert beträgt 99, beim LI-USB 9999.
.\"
.TP
number_gl
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Lokdecoder (GL) fest. Gültig sind Werte von 0 bis 9999. Ein Wert von 0 
bedeutet, dass keine Lokdecoder verwendet werden. Der voreingestellte 
Wert beträgt 99, beim LI-USB 9999.
.\"
.TP
number_fb
Dieser Wert legt die Anzahl der angeschlossenen RS-Module fest. Gültig
sind Werte von 0 bis 512 (bei Modulen mit 8 Kontakten); 0 bedeutet, keine
Module sind angeschlossen. Der voreingestellte Wert beträgt 256, beim
LI-USB 512.
.\"
.\"
.SS loopback
.\"
.PP
Dieser Bus stellt keine Verbindung zu einem tatsächlich existierenden
Steuergerät her. Er ist primär für Entwicklungzwecke gedacht, kann
aber auch bei betriebsfähgien Installationen nützlich sein. Jedes
Kommando auf diesem Bus bewirkt lediglich ein entsprechendes Echo bei
den INFO-Sitzungen. Dieser Bus kann also auch für Kommunikationszwecke
genutzt werden.
.\"
.TP
number_ga
Anzahl der adressierbaren Magnetartikel (GA). Die Voreinstellung ist 256.
.\"
.TP
number_gl
Anzahl der adressierbaren Lokdecoder (GL). Die Voreinstellung ist 80.
.\"
.TP
number_fb
Anzahl der adressierbaren Rückmeldemodule mit je 16 Kontakten. Die
Voreinstellung ist 0 (keine Rückmeldemodule vorhanden).
.\"
.\"
.SS m605x
.\"
.PP
Dieses Modul unterstützt den Betrieb mit einem Märklin 6051 oder 6050,
das über die serielle Schnittstelle angeschlossen ist. Auch der Anschluß
über einen USB/Seriell-Konvertierer sollte problemlos möglich sein. Die
Einstellungen der Schnittstelle sind festgelegt auf 2400\ Baud, 8N2 und
können nicht verändert werden.
.\"
.TP
m6020mode
Bei Aktivierung dieses Modus werden die 4 Funktionen nicht gesendet.
Dieses Funktionalität wird nur vom 6021 unterstützt. Gültige Werte sind
»yes« oder »no«. Der voreingestellte Wert ist »no«.
.\"
.TP
fb_delay_time_0
Dieser Wert in Millisekunden legt fest, wie lange ein Rückmeldekontakt
auf Null liegen muß, bevor er als gültiger Wert weitergeleitet wird.
Hiermit lassen sich schlechte Rückmeldungen (Wackler) in begrenztem
Umfang entprellen. Der voreingestellte Wert beträgt 0\ ms.
.\"
.TP
ga_min_activetime
Dieser Wert in Millisekunden legt fest, wie lange ein Magnetartikel im
aktiv Status sein muß. Für einen stabilen Betrieb mit einem 6051 sind
75\ ms das absolute Minimum. Der voreingestellte Wert beträgt 75\ ms.
.\"
.TP
pause_between_commands
Mit diesem Wert wird die Verzögerungszeit in Millisekungen eingestellt,
nach der ein weiterer Befehl an die angeschlossene Zentrale gesendet
wird. Der optimale Wert muß händisch ermittelt werden. Wenn die Zentrale
nicht reagiert, oder Befehle ignoriert, sollte der Wert erhöht werden.
Der voreingestellte Wert beträgt 200\ ms.
.\"
.TP
pause_between_bytes
Mit diesem Wert wird die Verzögerungszeit in Millisekungen eingestellt,
die zwischen dem Versenden von zwei Bytes bei Multi-Byte-Befehlen
gewartet wird. Hardware-Handshake funktioniert nicht mit allen Geräten,
so dass dieser Parameter eingeführt wurde, um diesen zu ermöglichen. Der
voreingestellte Wert beträgt 2\ ms.
.\"
.TP
number_ga
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Magnetartikel (GA) fest. Dieser Parameter hat keinen wirklichen Effekt,
da das Interface nur die Adressen von 1 bis 256 unterstützt. Der
voreingestellte Wert beträgt 256; bitte unverändert lassen.
.\"
.TP
number_gl
Dieser Wert legt den maximalen Adressbereich für die verwendeten
Lokdecoder (GL) fest. Der voreingestellte Wert entspricht dem maximal
gültigen Wert von 80; bitte unverändert lassen.
.\"
.TP
number_fb
Dieser Wert legt die Anzahl der am 6051/6050 angeschlossenen 6088
Rückmeldemodule fest. Gültig sind Werte von 0 bis 31. Der
voreingestellte Wert beträgt 0 (keine Module sind angeschlossen).
Bitte beachten Sie, dass auf 6088 Module, die an anderen Geräten
angeschlossen sind (Memory) nicht zugegriffen werden kann.
.\"
.\"
.SS selectrix
.PP
Selectrix CC-2000 und Rautenhaus SLX852.
.TP
number_ga
.TP
number_gl
.TP
number_fb
.TP
controller
.\"
.\"
.SS zimo
.PP
Zimo MX1
.TP
number_ga
.TP
number_gl
.TP
number_fb
.TP
fb_delay_time_0
.\"
.\"
.SH "DATEIEN"
.I /etc/srcpd.conf
.\"
.\"
.SH "SIEHE AUCH"
.BR srcpd\ (8)
.\"
.\"
.SH "AUTOREN"
Die deutsche Übersetzung wurde von Guido Scholz
(gscholz@users.sourceforge.net) unter Mitwirkung von Matthias Trute
(mtrute@users.sourceforge.net) angefertigt.

