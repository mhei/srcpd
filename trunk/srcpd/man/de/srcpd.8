.\"
.\" Manual page for srcpd
.\" Process with:
.\"   groff -man -Tlatin1 srcpd.8 | less
.\" or
.\"   groff -man -Tutf8 srcpd.8 | less
.\"
.\" Get a printable version with:
.\"   groff -mandoc -Tps srcpd.8 > srcpd.ps
.\"
.\"
.TH srcpd 8 "26. Dezember 2007"
.\"

.SH NAME
srcpd \- SRCP sprechender Systemdienst
.\"

.SH SYNTAX
.B srcpd
[ Optionen ] 
.\"

.SH BESCHREIBUNG
.PP
Dieses Handbuch ist nicht vollstndig. Fr weitere Informationen
besuchen Sie bitte die Internetseite des Projektes unter
http://srcpd.sourceforge.net/.
.PP
Bei
.B srcpd
handelt es sich um einen UNIX-Systemdienst (Daemon) zur Steuerung einer
digitalen Modellbahn ber das Simple Railroad Command Protocol (SRCP).
.PP
Beim Start liest das Programm die systemweite Konfigurationsdatei
\fBsrcpd.conf\fP ein. Hierbei handelt es sich um eine XML-Datei, deren
Aufbau und Inhalt im Handbuch \fBsrcpd.conf (5)\fP nher erlutert sind.
Die Spezifikation von SRCP selbst befindet sich auf der Internetseite
http://srcpd.sourceforge.net/srcp.
.\"

.SH OPTIONEN
.TP
.BI \-h
Ausgabe einiger kurzer Hinweise zur Benutzung.
.TP
.BI \-n
Nach dem Start wechselt der srcpd nicht in den Hintergrund und
bleibt aktiv. Dies ist f√ºr das Ubuntu upstart Mechanismus sinnvoll.
.TP

.BI \-v
Ausgabe der Version des Programms und der untersttzten SRCP-Version.
.TP
.BI \-f\ <Dateiname>
Nutze den bergebenen Dateinamen als Konfigurationsdatei. Der
voreingestellte Wert fr diese Datei wird beim Kompilieren des
Programms festgelegt und kann mit der Option \fB-h\fP angezeigt werden.
.\"

.SH BEMERKUNGEN
.SS Inbetriebnahme
Der \fBsrcpd\fP hlt sich an die Konventionen des Filesystem Hierarchy
Standard (FHS, http://www.pathname.com/fhs/). Fr weiterfhrende und
spezielle Konfigurationsmglichkeiten von \fISystemdiensten\fP nutzen
Sie bitte die Dokumentation Ihres Betriebssystems. Die folgenden
Informationen geben allgemein gltige Hinweise zur Konfiguration.

Erstellen Sie zunchst eine zu ihrer Modellbahnsteuerung passende
Konfigurationsdatei (\fIsrcpd.conf\fP). Speichern Sie diese dann mit
Administrationsrechten im Verzeichnis fr die systemweite Konfiguration
(\fI/etc\fP) ab. Die mitgelieferte Beispieldatei mu dabei ersetzt bzw.
berschrieben werden.

Sobald die angepate Konfigurationsdatei vorliegt, kann der Daemon mit
folgendem Befehl gestartet werden:

.RS
.nf
/etc/init.d/srcpd start
.fi
.RE

Luft der srcpd-Daemon bereits, mu er zum Einlesen der neuen
Konfiguration zunchst angehalten werden. Das Anhalten des Daemons
erfolgt analog zum Startvorgang mit folgendem Befehl:

.RS
.nf
/etc/init.d/srcpd stop
.fi
.RE

Unter bestimmten Voraussetzungen kann der srcpd-Daemon auch im
laufenden Betrieb, also ohne generellen Neustart, eine vernderte
Konfigurationsdatei einlesen. Da der Zugriff auf Hardwareschnittstellen
unter UNIXoiden Betriebssystemen ber Berechtigungen geregelt wird,
mssen die Rechte fr den srcpd-Daemon in der Konfigurationsdatei
(\fIsrcpd.conf\fP) so eingestellt werden, dass er jederzeit Zugriff auf
die gewnschte Schnittstelle erhlt.

Fr Modellbahnhardware, die ber serielle Schnittstellen (USB, RS232)
angeschlossen ist, reicht es, den srcpd-Daemon mit der entsprechenden
Gruppenberechtigung (in der Regel dialout) zu betreiben. Beim
ddl-s88 Modul, das S88-Rckmeldungen ber die parallele Schnittstelle
einliest, wird eine Systemfunktion genutzt (ioperm), die immer
root-Berechtigung bentigt. Daher mu in diesem Fall der srcpd-Daemon
mit root-Berechtigung laufen. 

Zum Neueinlesen der Konfigurationsdatei dient, unter der Voraussetzung,
die oben geschilderten Bedingungen sind eingehalten, folgender Befehl:

.RS
.nf
/etc/init.d/srcpd reload
.fi
.RE

Zur Verfolgung von Fehlern beim Start oder im laufenden Betrieb, knnen
Sie die Log-Datei des syslog-Systemdienstes (\fI/var/log/messages\fP)
nutzen. Die Meldungen lassen sich mit Administrationsrechten
beispielsweise in einem Terminalfenster mit folgendem Befehl beobachten:

.RS
.nf
tail -f /var/log/messages
.fi
.RE

Die Ausfhrlichkeit der dort erscheinenenden Meldungen lt sich ber
Einstellungen in der
.IR srcpd.conf
anpassen. Nhere Informationen hierzu bietet das zugehrige Handbuch. 

.SS Lenz USB-Interface
.PP
Um dieses USB-Gert in Betrieb zu nehmen, mu das Kernelmodul
.IR ftdi_sio
verfgbar sein. Bei den gngigen Linux-Distributionen
ist das in der Regel ohne zustzliche Konfigurationseinstellungen der
Fall. Das Modul fr die Lenz-Gerte erzeugt beim Starten
unterschiedliche Rckgabewerte. Diese haben die folgende Bedeutung:
.TP
.BI 0
Das Gert ist betriebsbereit.
.TP
.BI -1
Digitalzentrale wurde nicht gefunden. Die Softwareversion der Zentrale
konnte nicht ermittelt werden.
.TP
.BI -2
Digitalzentrale wurde nicht gefunden. Die Softwareversion der Zentrale
konnte nicht ermittelt werden.
.TP
.BI -3
USB-Interface nicht gefunden. Die Softwareversion des
Schnittstellengertes konnte nicht ermittelt werden. Mglicherweise ist
keine Digitalzentrale am USB-Interface angeschlossen.
.TP
.BI -4
Gert nicht gefunden.
.\"

.SH "SIEHE AUCH"
srcpd.conf (5)
.\"

.SH FEHLER
.PP
Sicher gibt es noch ein ganze Reihe an Fehlern. Bitte leiten Sie
Fehlerberichte und Vorschlge fr Verbesserungen an die
Entwickler-Mailingliste auf http://srcpd.sourceforge.net/.
.\"

.SH AUTOREN
Dieses Handbuch wurde geschrieben von
Matthias Trute (mtrute@users.sourceforge.net),
Frank Schimschke (schmischi@users.sourceforge.net) und
Guido Scholz (gscholz@users.sourceforge.net).
.\"

.SH LIZENZ
GNU General Public License, Version 2

