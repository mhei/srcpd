.TH srcpd.conf 5
.\"
.\"
.SH "NAME"
srcpd.conf \- Die Konfigurationsdatei für den srcpd Deamon
.\"
.\"
.SH "BESCHREIBUNG"
Die Datei \fIsrcpd.conf\fP wird vom SRCP-Daemon \fBsrcpd\fP als
systemweite Konfigurationsdatei genutzt. Sie bescheibt die
für die Laufzeit des Systemsdienstes entscheidenden Einstellungen zum
Verhalten des Daemons selbst, sowie die Anzahl, Art und Betriebsweise
der angeschlossenen Schnittstellen zur Modellbahn. Weitere Details zum
Betrieb beschreibt das Handbuch
.BR srcpd (8)
des Daemons.
.\"
.\"
.SH "STANDARD KONFIGURATIONSDATEI"
.\"
.PP
Die dem \fBsrcpd\fP mitgelieferte Standardkonfigurationsdatei enthält
beispielhafte Einstellungen sowohl für den Server als auch für einen
vorkonfigurierten Bus. Sie hat den folgenden Aufbau:
.PP
.RS
.nf
<?xml version="1.0"?>
<srcpd version="2.0">
  <bus>
    <server>
      <tcp-port>4303</tcp-port>
      <pid-file>/var/run/srcpd.pid</pid-file>
      <username>nobody</username>
      <groupname>nogroup</groupname>
    </server>
    <verbosity>5</verbosity>
  </bus>
  <bus>
    <loopback>
      <number_fb>3</number_fb>
    </loopback>
    <use_watchdog>no</use_watchdog>
    <verbosity>5</verbosity>
    <auto_power_on>yes</auto_power_on>
  </bus>
</srcpd>
.fi
.RE
.\"
.\"
.SH "DATEIFORMAT"
.\"
.PP
Die Konfigurationsdatei wird im XML-Format abgespeichert. Da es sich bei
XML-Dateien um ein reines Textformat handelt, kann ein erfahrener
Benutzer solche Dateien mit einem beliebigen Texteditor bearbeiten.
Weniger erfahrenen Benutzern sei empfohlen, Veränderungen in der Datei
mit einem speziellen Programm vorzunehmen, damit der Inhalt der Datei
stets korrektes XML enthält.
.PP
Treten beim Lesen der Konfigurationsdatei Fehler auf, sendet \fBsrcpd\fP
entsprechende Fehlermeldungen an den syslog-Daemon. Diese können über
die Datei \fI/var/log/messages\fP verfolgt werden.
.\"
.PP
Aktuell gibt es keine Dokumententypspezifikation (DTD), mit der der
Inhalt der Konfigurationsdatei auf seine Gültigkeit hin überprüft werden
kann.
.\"
.PP
Jede Konfigurationsdatei muß die folgende Grundstruktur enthalten:
.\"
.PP
.nf
    <?xml version="1.0"?>
    <srcpd>
    ...
    </srcpd>
.fi

.PP
Innerhalb dieser Struktur (...) werden die verwendeten Busse angelegt,
für die es jeweils wieder eine eigene Grundstruktur gibt:
.PP
.nf
    <bus>
    ...
    </bus>
    <bus>
    ...
    </bus>
.fi
.\"
.\"
.SS Allgemeines

.PP
Der erste konfigurierte Bus sollte der für den Server selbst sein. Die
Reihenfolge und die Anzahl der weiteren Busse sind beliebig. Es sollten
nur Busse konfiguriert werden, die auch tatsächlich beim Betrieb des
Daemons Verwendung finden. Nicht benötigte Busse können beispielsweise
über Kommentarzeichen ausgeklammert werden:
.PP
.nf
    <!--
    <bus>
    ...
    </bus>
    -->
.fi

.PP
Die folgenden Konfigurationsoptionen lassen sich für alle Busse
jeweils individuell festlegen.
.\"
.TP
verbosity
Abhängig von diesem Zahlenwert (0..7) erzeugt \fBsrcpd\fP während des
Betriebs mehr oder weniger ausführliche Protokollmeldungen zum aktuellen
Geschehen. Mit dem Wert 0 erfolgt nur eine minimale Ausgabe, mit höheren
Werten steigt auch die Ausführlichkeit dieser Meldetätigkeit. Für die
Fehlersuche sollte der Wert möglichst hoch, bei störungsfreiem Betrieb
möglichst niedrig gewählt werden.
.\"
.TP
device
Hiermit wird der Name der angesteuerten Schnittstelle (z.B. /dev/ttyS0)
festgelegt. Die Busse \fBserver\fP und \fBloopback\fP benötigen diesen
Eintrag nicht.
.\"
.TP
auto_power_on
Hiermit wird festgelegt, ob beim Start des Daemons automatisch der
Digitalstrom des Busses eingeschaltet wird. Gültige Werte sind »yes«
oder »no«. Die Busse \fBserver\fP und \fBloopback\fP benötigen diesen
Eintrag nicht.
.\"
.\"
.SS server
.\"
.PP
Dieser Bus darf in keiner Konfigurationsdatei fehlen. Er verfügt über
die folgenden Einstellmöglichkeiten:
.\"
.TP
tcp-port
Mit diesem Wert wird die Netzwerkportnummer für die TCP/IP-Kommunikation
zwischen \fBsrcpd\fP und den SRCP-Clients festgelegt. Die Voreinstellung
hierfür ist der von der IANA festgelegte Wert \fB4303\fP.
.\"
.TP
pid-file
Name der Datei, in der \fBsrcpd\fP die Prozess-ID abspeichert. Der
voreingestellte Wert hierfür ist \fI/var/run/srcpd.pid\fP.
.\"
.TP
username
Benutzerkennung, unter der \fBsrcpd\fP auf dem System läuft.
Voreingestellt ist \fBnobody\fP.
.\"
.TP
groupname
Gruppenkennung unter der \fBsrcpd\fP auf dem System läuft. Voreingestellt
ist \fBnogroup\fP.
.\"
.\"
.SS hsi-88
.\"
.PP
This driver connects with the HSI-88 device from Littfinski connected
via the serial port. An USB2Serial converter should work fine. The serial
line settings are fixed to 9600baud and cannot be changed. Sum of all
feedback-modules must be less or equal to 31, otherwise you will get an
errormessage.
.\"
.TP
number_fb_left
HSI-88 has three lines for S88-bus. This value is number of feedback-modules
(with 16 inputs) connected to line called \fBleft\fP. If you use
feedback-modules with 8 inputs, 2 modules are counted as one.
.\"
.TP
number_fb_center
HSI-88 has three lines for S88-bus. This value is number of feedback-modules
(with 16 inputs) connected to line called \fBcenter\fP. If you use
feedback-modules with 8 inputs, 2 modules are counted as one.
.\"
.TP
number_fb_right
HSI-88 has three lines for S88-bus. This value is number of feedback-modules
(with 16 inputs) connected to line called \fBright\fP. If you use
feedback-modules with 8 inputs, 2 modules are counted as one.
.\"
.TP
fb_delay_time_0
This is the time in milliseconds an feedback input must be zero, before
zero is delivered to clients. With this feature you can compensate bad
feedback signals in a specific range.
.\"
.TP
refresh
The time in microseconds after srcpd will read feedback from HSI-88.
.\"
.\"
.SS intellibox
.\"
.PP
This driver connects with the Intellibox device from Uhlenbrock connected
via the serial port. Only extended mode commands are used. Program of
decoders is currently implemented for DCC only.
Possible values for speed of serial port are 2400baud, 4800baud, 9600baud,
19200baud and 38400baud.
.\"
.TP
fb_delay_time_0
This is the time an feedback input must be zero, before zero is delivered to
clients. Time is milliseconds. With this feature you can compensate bad
feedback in a specific range.
.\"
.TP
pause_between_commands
This is the time between two commands the drivers must wait. The exact
values should be hand tuned. If the system does not respond or drops
commands try to increase this value. Default is 250 (milliseconds).
.\"
.TP
number_ga
This is the number of GA. Supported range is 0..1024. A value of 0 means no
GA available.
Default is 256.
.\"
.TP
number_gl
Like the number of GA this number gives the maximum address. Supported range
is 0..10239. A value of 0 means no GL available.
Default is 80.
.\"
.TP
number_fb
This is the number of S88 modules attached to the Intellibox device.
It can be as large as 31. The default is 0 (no modules are attached).
Please note that Loconet is currently not supported.
.\"
.\"
.SS li100, li100usb
.\"
.PP
This driver connects with the LI100, LI100F, LI101F or LI-USB devices from
LENZ connected via the serial port/USB-interface. An USB2Serial converter
should not be used. The serial line settings are depending on type of
interface. For LI-USB it's fixed to 57600baud with no chance to change.
Autodetection of serial port interface speed is currently under
construction. If connection fails, try restart of srcpd with an other
speed. Possible values can be 9600baud, 19200baud, 38400baud, 57600baud and
115200baud (depending on your interface).
.\"
.TP
fb_delay_time_0
This is the time an feedback input must be zero, before zero is delivered to
clients. Time is milliseconds. With this feature you can compensate bad
feedback in a specific range.
.\"
.TP
number_ga
This is the number of GA. Supported range is 0..1024. A value of 0 means no
GA available.
Default is 99 (LI-USB 9999).
.\"
.TP
number_gl
Like the number of GA this number gives the maximum address. Supported range
is 0..9999. A value of 0 means no GL available.
Default is 99 (LI-USB 9999).
.\"
.TP
number_fb
This is the number of RS modules attached to the Lenz device.
It can be as large as 512. It's assumed, that one modul has 8 inputs.
A value of 0 means no FB available.
Default is 256 (LI-USB 512).
.\"
.\"
.SS loopback
.\"
.PP
Dieser Bus stellt keine Verbindung zu einem existierenden Steuergerät
her. Er ist primär für Entwicklungzwecke gedacht kann aber auch 
bei betriebsfähgien Installationen nützlich sein. Jedes Kommando auf
diesem Bus bewirkt lediglich ein entsprechendes Echo bei den
INFO-Sitzungen. Dieser Bus kann also für Kommunikationszwecke genutzt
werden.
.\"
.TP
number_ga
Anzahl der adressierbaren GA-Geräte. Die Voreinstellung ist 256.
.\"
.TP
number_gl
Anzahl der adressierbaren GL-Geräte. Die Voreinstellung ist 80.
.\"
.TP
number_fb
Anzahl der adressierbaren Rückmeldekontakte. Die Voreintsellung ist 0
(keine Rückmeldemodule vorhanden).
.\"
.\"
.SS m605x
.\"
.PP
This driver connects with the 6051 or 6050 devices from Marklin connected
via the serial port. An USB2Serial converter should work fine. The serial
line settings are fixed to 2400 8N2 and cannot be changed.
.\"
.TP
m6020mode
In this mode the srcpd does not sent the 4 functions. This
is a feature of the 6021 only.
.\"
.TP
p_time
This is the time the driver code waits until it recognized the input
change in milliseconds. This feature may support a debounce found in
the hardware.
.\"
.TP
ga_min_activetime
The time in milliseconds a GA device needs to be in active state. The
absolute minimum is 75 ms and is needed for stable communication with
the 6051.
.\"
.TP
pause_between_commands
This is the time between two commands the drivers must wait. The exact
values should be hand tuned. If the system does not respond or drops
commands try to increase this value. Default is 200 (milliseconds).
.\"
.TP
pause_between_bytes
This is the time the driver waits between 2 bytes in multi-byte commands.
The hardware handshake does not work with all devices so this parameter
was introduced to support it. The default is 2 (milliseconds)
.\"
.TP
number_ga
This is the number of GA. This parameter does not have a real effect
since the interface supports the addresses 1...256 only. Keep the
default untouched.
.\"
.TP
number_gl
Like the number of GA this number gives the maximum address. Since this
number is limited to 80, keep the default untouched.
.\"
.TP
number_fb
This is the number of 6088 modules attached to the 6051/6050 device.
It can be as large as 31. The default is 0 (no modules are attached).
Please note that 6088 modules attached to other devices (memory)
cannot be accessed.
.\"
.\"
.SH "DATEIEN"
.I /etc/srcpd.conf
.\"
.\"
.SH "SIEHE AUCH"
srcpd (8)

